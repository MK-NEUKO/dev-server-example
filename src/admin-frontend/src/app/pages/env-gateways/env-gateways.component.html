<section class="container">
  <h1>Env Gateways of Dev Server Example</h1>
  <div class="gateway-card">
    <div
      class="gateway-card__header"
      [class.bg-success]="!currentConfig.error()"
      [class.bg-danger]="currentConfig.error()"
    >
      <h2 class="gateway-card__heading">Gateway 1</h2>
    </div>

    <div class="gateway-card__body">
      <ng-container *ngIf="!currentConfig.isLoading(); else loading">
        <div
          class="gateway-card__body-content bg-danger-emphasis"
          *ngIf="currentConfig.error() as error"
        >
          <h3>Error</h3>
          <pre class="gateway-card__code">{{
            currentConfig.error() | json
          }}</pre>
        </div>
        <div
          class="gateway-card__body-content"
          *ngIf="currentConfig.value() as config"
        >
          <h3>Name: {{ currentConfig.value()?.name }}</h3>
          <div *ngIf="currentConfig.value() as config">
            <pre>
              <code [highlight]="config | json" language="json" lineNumbers></code>
            </pre>
          </div>
        </div>
      </ng-container>
      <ng-template #loading>
        <div class="spinner__container">
          <div class="spinner">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </ng-template>
    </div>
    <div class="gateway-card__footer">
      <button class="button" (click)="currentConfig.reload()">Reloade</button>
      <button class="button margin-start" (click)="destinationTest()">
        Test
      </button>
    </div>
  </div>
</section>
